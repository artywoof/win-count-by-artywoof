<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Overlay</title>
    <style>
        /* ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á */
        html {
            background: none !important;
            background-color: transparent !important;
            background-image: none !important;
            background-attachment: initial !important;
            background-blend-mode: initial !important;
            background-clip: initial !important;
            background-origin: initial !important;
            background-position: initial !important;
            background-repeat: initial !important;
            background-size: initial !important;
        }
        
        body {
            background: none !important;
            background-color: transparent !important;
            background-image: none !important;
            background-attachment: initial !important;
            background-blend-mode: initial !important;
            background-clip: initial !important;
            background-origin: initial !important;
            background-position: initial !important;
            background-repeat: initial !important;
            background-size: initial !important;
            margin: 0 !important;
            padding: 0 !important;
            width: 100% !important;
            height: 100% !important;
        }
        
        /* ‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö */
        *, *::before, *::after {
            background: none !important;
            background-color: transparent !important;
            background-image: none !important;
        }

        /* ‡∏•‡∏ö gradient ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏°‡∏≤‡∏à‡∏≤‡∏Å extension */
        html::before, html::after,
        body::before, body::after {
            display: none !important;
            content: none !important;
        }
    </style>
</head>
<body>
    <div id="overlay-content" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 72px; font-family: Arial; text-shadow: 2px 2px 4px rgba(0,0,0,1); z-index: 9999;">
        üëë0/10
    </div>
    
    <div id="debug" style="position: fixed; top: 10px; left: 10px; color: lime; font-size: 12px; background: rgba(0,0,0,0.9); padding: 5px; border-radius: 3px; z-index: 9999;">
        0/10
    </div>

    <script>
        // ‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏î‡∏¢ extension
        function removeAllBackgrounds() {
            document.documentElement.style.background = 'none';
            document.documentElement.style.backgroundColor = 'transparent';
            document.documentElement.style.backgroundImage = 'none';
            
            document.body.style.background = 'none';
            document.body.style.backgroundColor = 'transparent';
            document.body.style.backgroundImage = 'none';
            
            // ‡∏•‡∏ö class ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
            document.documentElement.className = '';
            document.body.className = '';
        }

        let win = 0;
        let goal = 10;
        let showCrown = true;
        let showGoal = true;
        
        function updateDisplay() {
            const content = document.getElementById('overlay-content');
            const debug = document.getElementById('debug');
            
            let display = '';
            if (showCrown) display += 'üëë';
            display += win;
            if (showGoal) display += '/' + goal;
            
            content.textContent = display;
            debug.textContent = win + '/' + goal;
        }
        
        if (typeof BroadcastChannel !== 'undefined') {
            const channel = new BroadcastChannel('win-count-overlay');
            
            channel.onmessage = (event) => {
                console.log('üìª OVERLAY: Received:', event.data);
                const data = event.data;
                
                if (data) {
                    if (data.win !== undefined) win = data.win;
                    if (data.goal !== undefined) goal = data.goal;
                    if (data.show_crown !== undefined) showCrown = data.show_crown;
                    if (data.show_goal !== undefined) showGoal = data.show_goal;
                    updateDisplay();
                    console.log('üìª OVERLAY: Updated to win=' + win + ', goal=' + goal);
                }
            };
            
            setTimeout(() => channel.postMessage({ type: 'request-sync' }), 100);
            setInterval(() => channel.postMessage({ type: 'request-sync' }), 3000);
            
            console.log('üìª OVERLAY: Ready');
        }
        
        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ function ‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
        removeAllBackgrounds();
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏∏‡∏Å 100ms ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô extension ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
        setInterval(removeAllBackgrounds, 100);
        
        updateDisplay();
    </script>
</body>
</html>
