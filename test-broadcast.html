<!DOCTYPE html>
<html>
<head>
    <title>BroadcastChannel Test</title>
</head>
<body>
    <h1>BroadcastChannel Test</h1>
    <button onclick="sendTest()">Send Test</button>
    <button onclick="sendRandomWin()">Send Random Win</button>
    <div id="log"></div>

    <script>
        const channel = new BroadcastChannel('win-count-overlay');
        const log = document.getElementById('log');
        
        channel.onmessage = (event) => {
            console.log('Received:', event.data);
            log.innerHTML += '<div>Received: ' + JSON.stringify(event.data) + '</div>';
        };
        
        function sendTest() {
            const data = { win: 999, goal: 50, show_crown: true, show_goal: true };
            channel.postMessage(data);
            console.log('Sent:', data);
            log.innerHTML += '<div>Sent: ' + JSON.stringify(data) + '</div>';
        }
        
        function sendRandomWin() {
            const data = { win: Math.floor(Math.random() * 100), goal: 10, show_crown: true, show_goal: true };
            channel.postMessage(data);
            console.log('Sent:', data);
            log.innerHTML += '<div>Sent: ' + JSON.stringify(data) + '</div>';
        }
    </script>
</body>
</html>
